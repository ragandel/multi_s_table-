"use strict";function SortTable(t,e){function a(){var t=$(this).parent();t.find(".tooltiptext").remove(),t.find(".tool_tip").removeClass("tool_tip")}function i(t,e,a){for(var i=e.length,n=0;n<i;++n)for(var d=0;d<i-1;++d)if(h&&t[d]>t[d+1]||!h&&t[d]<t[d+1]){var s,p;s=t[d],t[d]=t[d+1],t[d+1]=s,p=a[d],a[d]=a[d+1],a[d+1]=p}return a.map(function(t){return e[t]})}function n(){function t(t,e){var a;if(t.length<=0)return++n,void r.space.index.push(e);if(!isNaN(t))return r.number.data.push(+t),void r.number.index.push(e);if(a=t.match(p.regExp._ip)){var i=String(a).split("."),d=16777216*i[0]+65536*i[1]+256*i[2]+1*i[3];r.ip.data.push(d),r.ip.index.push(e)}else if(t.match(p.regExp._time)||t.match(p.regExp._date)){if(a=t.match(p.regExp._date_time))r.date.data.push(Date.parse(a)),r.date.index.push(e);else if(a=t.match(p.regExp._time_date))r.date.data.push(Date.parse(a)),r.date.index.push(e);else if(a=t.match(p.regExp._date))r.date.data.push(Date.parse(a)),r.date.index.push(e);else if(a=t.match(p.regExp._time)){var s=String(a).split(":"),h=100*s[0]+10*s[1]+s[2]+Date.now();r.date.data.push(h),r.date.index.push(e)}}else(a=t.substr(0,8))==p._ptotocols._https||(a=t.substr(0,7))==p._ptotocols._http?(a.length,r.abc.data.push(t[a.length].toLowerCase()),r.abc.index.push(e)):(r.abc.data.push(t[0].toLowerCase()),r.abc.index.push(e))}var e,a=[],n=0,r={abc:{index:[],data:[]},number:{index:[],data:[]},ip:{index:[],data:[]},date:{index:[],data:[]},space:{index:[],data:[]}};if(a=$(s).find("tbody tr"),$.each(a,function(a){var i=$(this).find("td,th").eq(d);if($(i).find("input").length>0){var s=$(i).find("input");s.filter(":text").length>0?t(e=s.filter(":text").val().trim(),a):s.filter(":hidden").length>0?(++n,r.space.index.push(a)):s.filter(":checkbox").length>0&&(1==(e=s.filter(":checkbox")).prop("checked")?(r.number.data.push(1),r.number.index.push(a)):(++n,r.space.index.push(a)))}else $(i).find("select").length>0?t(e=$(i).find("select").val().trim(),a):$(i).find("textarea").length>0?t(e=$(i).find("textarea").val().trim(),a):t(e=$(i).text(),a)}),n==a.length)return!0;var o=$(s).find("tbody").empty(),l=[{data:r.number.data,index:r.number.index},{data:r.date.data,index:r.date.index},{data:r.ip.data,index:r.ip.index},{data:r.abc.data,index:r.abc.index}];return 1==h?(r.space.index.length&&r.space.index.forEach(function(t){o.append(a[t])}),l.forEach(function(t,e){t.data.length>0&&o.append(i(t.data,a,t.index))})):(l.forEach(function(t,e){l[l.length-e-1].data.length>0&&o.append(i(l[l.length-e-1].data,a,l[l.length-e-1].index))}),r.space.index.length&&r.space.index.forEach(function(t){o.append(a[t])})),!1}var d,s,p={nameClass:".sort-table",regExp:{_ip:/[1-9][0-9]{0,2}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/,_time:/[0-2][0-9]\:[0-5][0-9]\:[0-5][0-9]/,_date:/[1-9][0-9]{3}\-[0-1][0-9]\-[0-3][0-9]/,_date_time:/[1-9][0-9]{3}\-[0-1][0-9]\-[0-3][0-9]\s[0-2][0-9]\:[0-5][0-9]\:[0-5][0-9]/,_time_date:/[0-2][0-9]\:[0-5][0-9]\:[0-5][0-9]\s[1-9][0-9]{3}\-[0-1][0-9]\-[0-3][0-9]/,_http:/http:/i,_https:/https:/i},_span_block:{_span_arrow:"<span class='rows'> <span class='up'> &#9650 </span><span class='down'> &#9660 </span> </span>",_span_tTip:"<span class='tooltiptext'> Столбец пустой </span>"},_ptotocols:{_http:"http://",_https:"https://"}},r=t.concat(p.nameClass),h=1;r.length>0&&r.forEach(function(t){$(t+" thead").find(".rows").remove(),$(p._span_block._span_arrow).appendTo($(t+" thead").find("th, td"))}),$(r.join(",")).find("th").click(function(){var t=Date.now(),i=$(this).parents("table");if(s=i.attr("id")?"#"+i.attr("id"):"."+i.attr("class"),d=$(this).index(),-1==e.indexOf(d)){if(n())return $(this).addClass("tool_tip"),$(p._span_block._span_tTip).appendTo($(this)),setTimeout(a.bind(this),1e3),void $(s).find(".up, .down").css("visibility","visible");$(s).find(".up, .down").css("visibility","visible");var r=h?"hidden":"visible";$(s).find(".down").eq(d).css("visibility",r);var o=h?"visible":"hidden";$(s).find(".up").eq(d).css("visibility",o),h^=1,console.log("Время конца сортировки "+(Date.now()-t)+"ms")}})}